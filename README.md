[![GitHub release (latest by date including pre-releases)](https://img.shields.io/github/v/release/nfa-vfxim/tk-multi-workfiles2?include_prereleases)](https://github.com/nfa-vfxim/tk-multi-workfiles2) 
[![GitHub issues](https://img.shields.io/github/issues/nfa-vfxim/tk-multi-workfiles2)](https://github.com/nfa-vfxim/tk-multi-workfiles2/issues) 


# ShotGrid Workfiles <img src="icon_256.png" alt="Icon" height="24"/>

Using this app you can browse, open and save your Work Files and Publishes.

## Requirements

| ShotGrid version | Core version | Engine version |
|------------------|--------------|----------------|
| -                | v0.19.18     | -              |

**Frameworks:**

| Name                      | Version | Minimum version |
|---------------------------|---------|-----------------|
| tk-framework-shotgunutils | v5.x.x  | v5.3.5          |
| tk-framework-qtwidgets    | v2.x.x  |                 |



## Configuration

### Booleans

| Name                       | Description                                                                                                                                                                                                                               | Default value |
|----------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------|
| `show_change_context`      | A flag to enable the context change dialog. A context change window is provided where the user can pick an entity to change context to without opening a file.                                                                            | False         |
| `show_file_open`           | A flag to enable the open file dialog. A open file window is provided where the user can pick an entity and select the files associated with that context to open run other actions on.                                                   | True          |
| `show_file_save`           | A flag to enable the save file dialog. A save file window is provided where the user can save the current workfile to the Toolkit templated folder structure.                                                                             | True          |
| `launch_at_startup`        | A flag whether to launch the UI at application startup. This option is not supported on all engines because of differences in the way some platforms start up. Currently, only maya nuke and 3ds Max support this option.                 | False         |
| `show_my_tasks`            | Define if the My Tasks view should be visible or not.                                                                                                                                                                                     | True          |
| `auto_expand_tree`         | Automatically expands the root level of the treeviews.                                                                                                                                                                                    | False         |
| `allow_task_creation`      | Controls whether new tasks can be created from the app.                                                                                                                                                                                   | True          |
| `saveas_prefer_version_up` | Control how the save-as command determines the inital name to be used.  If set to True then the name from the current scene will be used and the version incremented.  If False then a new unique name will be used and the version reset | False         |


### Templates

| Name                    | Description                                                           | Default value | Fields                                     |
|-------------------------|-----------------------------------------------------------------------|---------------|--------------------------------------------|
| `template_work`         | A reference to a template which locates a work file on disk.          |               | context, [name], [version], [extension], * |
| `template_work_area`    | A reference to a template which locates the work directory on disk    |               |                                            |
| `template_publish`      | A reference to a template which locates a publish file on disk.       |               | context, [name], [version], [extension], * |
| `template_publish_area` | A reference to a template which locates the publish directory on disk |               |                                            |


### Hooks

| Name                     | Description                                                                                                                         | Default value                           |
|--------------------------|-------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|
| `hook_scene_operation`   | All the application specific scene operations (open, save etc) that the app needs to carry out are collected together in this hook. | {self}/scene_operation_{engine_name}.py |
| `hook_copy_file`         | Specify a hook that will be used to copy the file 'source_path' to 'target_path'.                                                   | {self}/copy_file.py                     |
| `hook_filter_work_files` | Specify a hook that, if needed, can filter the raw list of work files found for the current work area                               | {self}/filter_work_files.py             |
| `hook_filter_publishes`  | Specify a hook that, if needed, can filter the raw list of publishes returned from ShotGrid for the current Work area.              | {self}/filter_publishes.py              |
| `hook_get_badge`         | Specify a hook that, if desired, provides a badge icon to include in the UI when displaying a publish or work file.                 | {self}/get_badge.py                     |
| `custom_actions_hook`    | Hook which contains all custom action methods.                                                                                      | {self}/custom_actions.py                |
| `create_new_task_hook`   | Specify a hook that will create the task and do any input validation that is required.                                              | {self}/create_new_task.py               |


### Lists

| Name                            | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Default value                                                                                                                                                                                                                                                                                                                                                                              |
|---------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `entities`                      | This setting defines the different tabs that will show up on the left hand side. Each tab represents a ShotGrid query, grouped by some ShotGrid fields to form a tree. This setting is a list of dictionaries. Each dictionary in the list defines one tab, and should have the following keys: *caption* specifies the name of the tab, *entity_type* specifies the ShotGrid Entity type to display. *filters* is a list of standard API ShotGrid filters either in the standard or complex format. *hierarchy* is a list of ShotGrid fields relative to the entity type, defining the grouping of the tree. An optional *sub_query* key can be used to define a deferred query which will be run to collect children when an Entity is expanded in the tree view, typically Tasks for a Shot or an Asset. It is a dictionary with the following keys: *entity_type* key to specify the child Entity type to collect, *link_field* the ShotGrid field name used to link the Entity to its parent, *filters* a list of standard ShotGrid API filters, *hierarchy* a list of fields defining the grouping in the sub-tree. The optional *step_filter_on* setting is an Entity type and can be used to restrict the list of Steps used for filtering to only the Steps for the specified Entity type.  | [{'caption': 'Assets', 'entity_type': 'Task', 'step_filter_on': 'Asset', 'filters': [['entity', 'type_is', 'Asset']], 'hierarchy': ['entity.Asset.sg_asset_type', 'entity', 'step', 'content']}, {'caption': 'Shots', 'entity_type': 'Task', 'step_filter_on': 'Shot', 'filters': [['entity', 'type_is', 'Shot']], 'hierarchy': ['entity.Shot.sg_sequence', 'entity', 'step', 'content']}] |
| `my_tasks_extra_display_fields` | List of additional fields to display with the task in the My Tasks list.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | []                                                                                                                                                                                                                                                                                                                                                                                         |
| `my_tasks_filters`              | List of filters to apply to the tasks in the My Tasks tab.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | [['task_assignees', 'is', '{context.user}']]                                                                                                                                                                                                                                                                                                                                               |
| `file_extensions`               | List of file extensions to be shown in the work files view. If empty then all files that match the template will be shown.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | []                                                                                                                                                                                                                                                                                                                                                                                         |
| `version_compare_ignore_fields` | A list of fields that should be ignored when comparing files to determine if they are different versions of the same file.  If this is left empty then only the version field will be ignored. Care should be taken when specifying fields to ignore as Toolkit will expect the version to be unique across files that have different values for those fields and will error if this isn't the case.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | []                                                                                                                                                                                                                                                                                                                                                                                         |
| `file_browser_tabs`             | A list of tab names that are visible in the main browser. Values can be any combination of the following tab names: 'All', 'Working', and 'Publishes'. The order of the specified values determines the order of the tabs in the app.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | ['All', 'Working', 'Publishes']                                                                                                                                                                                                                                                                                                                                                            |


### Strings

| Name                  | Description                                                                          | Default value |
|-----------------------|--------------------------------------------------------------------------------------|---------------|
| `saveas_default_name` | The default name that gets used by when saving a work file using the save-as command | main          |


